local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- // สร้างหน้าต่างหลักตามรูปแบบในรูปภาพ
local Window = Rayfield:CreateWindow({
   Name = "Hermanos'Dev | PVP",
   LoadingTitle = "Bloxscript.com PVP",
   LoadingSubtitle = "by Hermanos",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "HermanosConfig",
      FileName = "PVP_Settings"
   }
})

-- // การตั้งค่าเริ่มต้น
local Settings = {
    ShowFOV = true,
    FOVRadius = 150,
    SilentAim = true,
    TargetPart = "Head",
    SpinEnabled = false,
    SpinSpeed = 50,
    FOVMode = "Middle" -- ล็อกกลางหน้าจอตามที่คุณต้องการ
}

-- // สร้างวงกลม FOV สีเหลือง
local FOVCircle = Drawing.new("Circle")
FOVCircle.Thickness = 2
FOVCircle.Color = Color3.fromRGB(255, 255, 0) -- สีเหลือง
FOVCircle.Visible = Settings.ShowFOV
FOVCircle.Filled = false

-- // สร้างเส้น Snapline สีแดง
local SnapLine = Drawing.new("Line")
SnapLine.Thickness = 1.5
SnapLine.Color = Color3.fromRGB(255, 0, 0) -- สีแดง
SnapLine.Visible = false

-- // สร้างหมวดหมู่ตามรูปภาพ
local GeneralTab = Window:CreateTab("General", 4483362458)
local CombatTab = Window:CreateTab("Combat", 4483362458)
local WeaponModTab = Window:CreateTab("Weapon Mod", 4483362458)
local CosmeticTab = Window:CreateTab("Cosmetic", 4483362458)
local EspTab = Window:CreateTab("Esp", 4483362458)

-- // ส่วนควบคุมในหมวด Combat
CombatTab:CreateToggle({
   Name = "Show FOV",
   CurrentValue = true,
   Callback = function(Value)
      Settings.ShowFOV = Value
      FOVCircle.Visible = Value
   end,
})

CombatTab:CreateSlider({
   Name = "FOV",
   Range = {0, 800},
   Increment = 1,
   Suffix = "Radius",
   CurrentValue = 150,
   Callback = function(Value)
      Settings.FOVRadius = Value
   end,
})

CombatTab:CreateDropdown({
   Name = "FOV Mode",
   Options = {"Middle", "Mouse"},
   CurrentOption = "Middle",
   Callback = function(Option)
      Settings.FOVMode = Option
   end,
})

CombatTab:CreateToggle({
   Name = "Magic Bullet / Silent Aim",
   CurrentValue = true,
   Callback = function(Value)
      Settings.SilentAim = Value
   end,
})

CombatTab:CreateDropdown({
   Name = "Aim Part",
   Options = {"Head", "HumanoidRootPart"},
   CurrentOption = "Head",
   Callback = function(Option)
      Settings.TargetPart = Option
   end,
})

CombatTab:CreateToggle({
   Name = "Block Spin",
   CurrentValue = false,
   Callback = function(Value)
      Settings.SpinEnabled = Value
   end,
})

-- // ระบบการทำงานหลัก
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

RunService.RenderStepped:Connect(function()
    local ScreenCenter = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
    local Mouse = game:GetService("UserInputService"):GetMouseLocation()
    
    -- ตั้งค่าตำแหน่งวงกลม FOV
    local TargetCenter = (Settings.FOVMode == "Middle") and ScreenCenter or Mouse
    FOVCircle.Position = TargetCenter
    FOVCircle.Radius = Settings.FOVRadius
    
    -- ระบบหาเป้าหมายและเส้น Snapline สีแดง
    local target = nil
    local shortestDistance = Settings.FOVRadius
    
    for _, v in pairs(Players:GetPlayers()) do
        if v ~= LocalPlayer and v.Character and v.Character:FindFirstChild(Settings.TargetPart) then
            local pos, onScreen = Camera:WorldToViewportPoint(v.Character[Settings.TargetPart].Position)
            if onScreen then
                local distance = (Vector2.new(pos.X, pos.Y) - TargetCenter).Magnitude
                if distance < shortestDistance then
                    target = v.Character[Settings.TargetPart]
                    shortestDistance = distance
                end
            end
        end
    end

    if target and Settings.SilentAim then
        local targetPos, _ = Camera:WorldToViewportPoint(target.Position)
        SnapLine.From = TargetCenter
        SnapLine.To = Vector2.new(targetPos.X, targetPos.Y)
        SnapLine.Visible = true
    else
        SnapLine.Visible = false
    end

    -- ระบบ Block Spin
    if Settings.SpinEnabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame * CFrame.Angles(0, math.rad(Settings.SpinSpeed), 0)
    end
end)
